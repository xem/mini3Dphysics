<script src="../../engine.js"></script>

<canvas id=canvas width=640 height=480></canvas>

<script>

c = canvas.getContext("2d");

// Create pistol bullet
pistol = particle(
  vec3(10, 450, 0), // position
  vec3(100, 0, 0),  // velocity
  vec3(0,-1,0),     // acceleration
  0.99,             // damping
  1/2               // inverseMass
);

// Create artillery
artillery = particle(
  vec3(10, 400, 0), // position
  vec3(80, 0, 0),   // velocity
  vec3(0,-20,0),    // acceleration
  0.99,             // damping
  1/200             // inverseMass
);

// Create fireball
fireball = particle(
  vec3(10, 350, 0), // position
  vec3(30, 0, 0),   // velocity
  vec3(0, 2, 0),    // acceleration
  0.9,              // damping
  1                 // inverseMass
);

// Create laser beam
laser = particle(
  vec3(10, 300, 0), // position
  vec3(300, 0, 0),  // velocity
  vec3(0, 0, 0),    // acceleration (no gravity)
  0.99,             // damping
  1/.1              // inverseMass
);

// Render loop
setInterval(() => {

  // Reset canvas
  canvas.width = canvas.width;
  
  // Integrate
  integrate(pistol, 0.016);
  integrate(artillery, 0.016);
  integrate(fireball, 0.016);
  integrate(laser, 0.016);
  
  // Draw
  c.fillRect(pistol.position.x, 480 - pistol.position.y, 2, 2);
  c.fillText("pistol", pistol.position.x - 10, 480 - pistol.position.y - 10);
  
  c.fillRect(artillery.position.x, 480 - artillery.position.y, 10, 10);
  c.fillText("artillery", artillery.position.x - 10, 480 - artillery.position.y - 10);

  c.fillRect(fireball.position.x, 480 - fireball.position.y, 5, 5);
  c.fillText("fireball", fireball.position.x - 10, 480 - fireball.position.y - 10);
  
  c.fillRect(laser.position.x, 480 - laser.position.y, 15, 4);
  c.fillText("laser", laser.position.x - 10, 480 - laser.position.y - 10);

}, 16);
</script>

<style>
canvas { background: #ddd }
</style>
